#!/usr/bin/env bash
set -euo pipefail

BASE_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
SCRIPT_DIR="$BASE_DIR/scripts"

# shellcheck disable=SC1091
source "$SCRIPT_DIR/runner.sh"
# shellcheck disable=SC1091
source "$SCRIPT_DIR/add.sh"

# Default to "run" if no argument is provided
CMD="${1:-run}"
shift || true  # remove first argument if it exists, safe even if none

case "$CMD" in
  run|list) handle_runner "$CMD" "$@" ;;
  add) handle_add "$@" ;;
  *) echo "Usage: $0 {run|list|add <file>}" >&2; exit 1 ;;
esac
